name: APT
description: Install APT packages
runs:
  using: composite
  steps:
  - name: Write deps to file
    shell: bash
    run: |
      echo \
        autoconf \
        build-essential \
        cmake \
        git \
        libdbus-1-dev \
        libglu1-mesa-dev \
        libgtk-3-dev \
        libwebkit2gtk-4.1-dev \
        texinfo \
        \
        liblzma-dev \
      > apt.lock

  # - uses: actions/cache@v4
  #   with:
  #     path: |
  #       /var/cache/apt
  #       /var/lib/apt
  #     key: apt-${{ hashFiles('apt.lock') }}-${{ runner.os }}-${{ runner.image }}-${{ runner.imageVersion }}

  - name: Update and Install Dependencies
    shell: bash
    run: |
      apt_packages=($(cat apt.lock))
      sudo apt update
      sudo apt install -y "${apt_packages[@]}"
